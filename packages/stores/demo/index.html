<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style></style>
    <link rel="stylesheet" href="" />
  </head>
  <body>
    <debug-store></debug-store>

    <script type="module">
      import { LitElement, html } from "lit";
      import { pipe, lazyLoad, joinAsync } from "../src";

      const sleep = (ms) =>
        new Promise((resolve) => setTimeout(() => resolve(), ms));

      const s1 = lazyLoad(async () => {
        await sleep(1000);

        return 2;
      });

      const s2 = lazyLoad(async () => {
        await sleep(1000);

        return 2;
      });

      const store = pipe(joinAsync([s1, s2]), async ([n1, n2]) => {
        await sleep(1000);
        return n1 + n2;
      });

      store.subscribe(() => {});

      window.__debugStore(store);
    </script>
  </body>
</html>
